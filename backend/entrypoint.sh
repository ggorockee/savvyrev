#!/bin/sh
# backend/entrypoint.sh (신규 파일)

# 이 스크립트는 컨테이너가 시작될 때 가장 먼저 실행됩니다.

echo "데이터베이스 마이그레이션을 시작합니다... 🚀"

# Alembic을 사용하여 데이터베이스를 최신 상태로 업그레이드합니다.
# "Gunicorn, 잠시만 기다려! 데이터베이스부터 최신 버전으로 단장하고 갈게."
alembic upgrade head

# 마이그레이션이 끝나면, Dockerfile의 CMD로 전달된 명령어를 실행합니다.
# 여기서는 gunicorn 서버를 시작하게 됩니다.
# `exec "$@"`는 현재 쉘 프로세스를 CMD 명령어로 대체하여
# 불필요한 쉘 프로세스가 남지 않도록 하는 깔끔한 방법입니다.
exec "$@"